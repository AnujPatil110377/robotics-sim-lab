[supervisord]
nodaemon=true
logfile=/dev/stdout
loglevel=info
pidfile=/var/run/supervisord.pid

[program:vncserver]
# Start TigerVNC on :1 (TCP 5901), allow external access
command=/usr/bin/tigervncserver -fg :1 -localhost no -geometry 1280x800 -SecurityTypes None
autorestart=true
stopsignal=INT
priority=10
environment=HOME="/home/developer",USER="developer"

[program:novnc]
# WebSocket proxy on 6080 â†’ VNC 5901
command=/usr/share/novnc/utils/novnc_proxy --vnc localhost:5901 --listen 0.0.0.0:6080
autorestart=true
priority=20

[program:xfce]
# Run XFCE on DISPLAY=:1 as developer user
command=/bin/sh -lc "export DISPLAY=:1; exec startxfce4"
user=developer
autorestart=true
priority=30
